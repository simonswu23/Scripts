def denEncounters
    return {
        :GRAVELER => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:WILLOWISP,:UTURN,:ROCKSLIDE,:MAGNITUDE],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :NUZLEAF => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:TOPSYTURVY,:MYSTICALFIRE,:NATUREPOWER,:RAZORLEAF],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :SOLOSIS => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:INSTRUCT,:VOLTSWITCH,:HIDDENPOWER,:PSYBEAM],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :TROPIUS => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:SHELTER,:STRENGTHSAP,:FLY,:LEAFBLADE],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :DUOSION => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:INSTRUCT,:VOLTSWITCH,:HIDDENPOWER,:PSYBEAM],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :SIGILYPH => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:EERIESPELL,:VACUUMWAVE,:AIRSLASH,:PSYBEAM],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :DHELMISE => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:FLIPTURN,:SNAPTRAP,:GIGADRAIN,:HEAVYSLAM],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :ROCKRUFF => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:UTURN,:EXTREMESPEED,:STEALTHROCK,:ROCKSLIDE],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :SHIFTRY => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:TOPSYTURVY,:MYSTICALFIRE,:NATUREPOWER,:RAZORLEAF],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :REUNICLUS => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:INSTRUCT,:VOLTSWITCH,:HIDDENPOWER,:PSYBEAM],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :FINNEON => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:TAILWIND,:QUIVERDANCE,:AQUARING,:WATERPULSE],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :BONSLY => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:ACCELEROCK,:SHIFTGEAR,:MIMIC,:ROCKTOMB],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :MEOWTH => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:GLARE,:DESTINYBOND,:TAILSLAP,:BITE],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :RELICANTH => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:WILDCHARGE,:SLACKOFF,:HEADSMASH,:ROCKPOLISH],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :PERSIAN => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:GLARE,:DESTINYBOND,:TAILSLAP,:BITE],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :LUMINEON => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:TAILWIND,:QUIVERDANCE,:AQUARING,:WATERPULSE],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :SUDOWOODO => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:ACCELEROCK,:SHIFTGEAR,:MIMIC,:ROCKTOMB],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :LANTURN => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:COSMICPOWER,:PARABOLICCHARGE,:SCALD,:THUNDERWAVE],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :CHINCHOU => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:COSMICPOWER,:PARABOLICCHARGE,:SCALD,:THUNDERWAVE],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :TRANQUILL => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:HONECLAWS,:DUALWINGBEAT,:DETECT,:ROOST],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :WAILMER => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:ERUPTION,:TOXIC,:BOUNCE,:WATERSPOUT],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :DUNSPARCE => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:EXTREMESPEED,:BOOMBURST,:ANCIENTPOWER,:COIL],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :VULLABY => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:SHADOWBONE,:PLAYROUGH,:WINGATTACK,:FOULPLAY],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :UNFEZANT => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:HONECLAWS,:DUALWINGBEAT,:DETECT,:ROOST],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :MASQUERAIN => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:DISCHARGE,:SHADOWBALL,:QUIVERDANCE,:WHIRLWIND],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :QUAGSIRE => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:LAVAPLUME,:REFRESH,:MUDDYWATER,:RECOVER],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :WAILORD => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:ERUPTION,:TOXIC,:BOUNCE,:WATERSPOUT],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :MANDIBUZZ => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:SHADOWBONE,:PLAYROUGH,:WINGATTACK,:FOULPLAY],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :TOGEDEMARU => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:PETALBLIZZARD,:PLAYROUGH,:ZINGZAP,:IRONHEAD],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :CHATOT => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:EARTHPOWER,:BOOMBURST,:NASTYPLOT,:CHATTER],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :SNORUNT => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:NATUREPOWER,:STEALTHROCK,:ICESHARD,:SHADOWSNEAK],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :CACNEA => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:OBSTRUCT,:FAKEOUT,:TOXICSPIKES,:LEECHSEED],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :GLALIE => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:NATUREPOWER,:STEALTHROCK,:ICESHARD,:SHADOWSNEAK],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :CACTURNE => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:OBSTRUCT,:FAKEOUT,:TOXICSPIKES,:LEECHSEED],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :CLAYDOL => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:STEELBEAM,:FLAMETHROWER,:ANCIENTPOWER,:ROCKBLAST],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :KLEFKI => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:EXPLOSION,:SNATCH,:MEFIRST,:FLASHCANNON],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :HERDIER => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:DRAGONDANCE,:NOBLEROAR,:TAKEDOWN,:CRUNCH],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :CRABRAWLER => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:JAWLOCK,:OCTOLOCK,:DRAINPUNCH,:CRABHAMMER],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :PACHIRISU => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:DIRECLAW,:PARTINGSHOT,:NUZZLE,:CHARM],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :CHIMECHO => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:BOOMBURST,:QUIVERDANCE,:RECOVER,:PSYSHOCK],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40]
        },
        :STOUTLAND => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:DRAGONDANCE,:NOBLEROAR,:TAKEDOWN,:CRUNCH],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :STUNFISK => {
            :Form => 1,
            :ShinyChance => 0,
            :Moves => [:GYROBALL,:NATUREPOWER,:EARTHQUAKE,:YAWN],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :ABRA => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:MAGICPOWDER,:SNARL,:ENCORE,:PSYCHICTERRAIN],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :KADABRA => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:MAGICPOWDER,:SNARL,:ENCORE,:PSYCHICTERRAIN],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :MANKEY => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:EXPLOSION,:SUCKERPUNCH,:CLOSECOMBAT,:PROTECT],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :PRIMEAPE => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:EXPLOSION,:SUCKERPUNCH,:CLOSECOMBAT,:PROTECT],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :RHYHORN => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:HEADLONGRUSH,:SLACKOFF,:ROCKSLIDE,:PROTECT],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :VANILLITE => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:MEMENTO,:WILLOWISP,:MIST,:ICEBEAM],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :PURUGLY => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:THRASH,:SWORDSDANCE,:EARTHQUAKE,:SUCKERPUNCH],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :RHYDON => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:HEADLONGRUSH,:SLACKOFF,:ROCKSLIDE,:PROTECT],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :VANILLUXE => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:MEMENTO,:WILLOWISP,:MIST,:ICEBEAM],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :VANILLISH => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:MEMENTO,:WILLOWISP,:MIST,:ICEBEAM],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :DITTO => {
            :Form => 0,
            :ShinyChance => 0.5,
            :Moves => [],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :TEDDIURSA => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:PARTINGSHOT,:BONEMERANG,:STRENGTH,:CROSSCHOP],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :URSARING => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:PARTINGSHOT,:BONEMERANG,:STRENGTH,:CROSSCHOP],
            :Ability => :UNNERVE,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :LOTAD => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:REVELATIONDANCE,:APPLEACID,:NATUREPOWER,:RAINDANCE],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :GASTRODON => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:SCORCHINGSANDS,:SPIKES,:RECOVER,:MUDDYWATER],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :NOIBAT => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:WILLOWISP,:HEX,:DRAGONPULSE,:SUPERFANG],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :LOMBRE => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [],
            :Moves => [:REVELATIONDANCE,:APPLEACID,:NATUREPOWER,:RAINDANCE],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :NOIVERN => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:WILLOWISP,:HEX,:DRAGONPULSE,:SUPERFANG],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :SWANNA => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:THUNDERWAVE,:NORETREAT,:BRAVEBIRD,:SURF],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :PONYTA => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:HIGHHORSEPOWER,:FELLSTINGER,:FLAREBLITZ,:HYPNOSIS],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :FRILLISH => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:BITTERMALICE,:POLLENPUFF,:BRINE,:RECOVER],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :RAPIDASH => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:HIGHHORSEPOWER,:FELLSTINGER,:FLAREBLITZ,:HYPNOSIS],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :JELLICENT => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:BITTERMALICE,:POLLENPUFF,:BRINE,:RECOVER],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :MARILL => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:NUZZLE,:UTURN,:PLAYROUGH,:AQUATAIL],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :TIMBURR => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:ICEHAMMER,:PROTECT,:DRAINPUNCH,:KNOCKOFF],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :ELECTRIKE => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:MATBLOCK,:FROSTBREATH,:FLAMEBURST,:VOLTSWITCH],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :MANECTRIC => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:MATBLOCK,:FROSTBREATH,:FLAMEBURST,:VOLTSWITCH],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :NIDORINO => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:GUNKSHOT,:FLAREBLITZ,:HEADSMASH,:SUCKERPUNCH],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :SALAZZLE => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:MUDDYWATER,:DAZZLINGGLEAM,:SLUDGEWAVE,:TOXIC],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :LURANTIS => {
            :Form => 0,
            :ShinyChance => 0.15,
            :Moves => [:SUPERPOWER,:HEADLONGRUSH,:ICEHAMMER,:SLASHANDBURN],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
        :BELDUM => {
            :Form => 0,
            :ShinyChance => 0,
            :Moves => [:LIFEDEW,:ZAPCANNON,:GRAVITY,:IRONHEAD],
            :Ability => nil,
            :IVs => [20,20,20,20,20,20],
            :EVs => [40,40,40,40,40,40],
        },
    }
end

def checkRaidStar(level)
    return 5 if level >= 90
    return 4 if level >= 75
    return 3 if level >= 60
    return 2 if level >= 45
    return 1 if level >= 30
    5
end

def encounterTable(den)
    case den
        when "Den1"
            if $game_switches[:Gym_18]
                return {
                    :ROCKRUFF => {
                        :encounter => denEncounters[:ROCKRUFF],
                        :weight => 2.0
                    },
                    :SHIFTRY => {
                        :encounter => denEncounters[:SHIFTRY],
                        :weight => 1.0
                    },
                    :REUNICLUS => {
                        :encounter => denEncounters[:REUNICLUS],
                        :weight => 1.0
                    },
                    :DUOSION => { #CHANGED
                        :encounter => denEncounters[:DUOSION],
                        :weight => 1.0
                    },
                    :TROPIUS => {
                        :encounter => denEncounters[:TROPIUS],
                        :weight => 1.0
                    },
                    :SIGILYPH => {
                        :encounter => denEncounters[:SIGILYPH],
                        :weight => 1.0
                    },
                    :DHELMISE => {
                        :encounter => denEncounters[:DHELMISE],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_16]
                return {
                    :ROCKRUFF => {
                        :encounter => denEncounters[:ROCKRUFF],
                        :weight => 2.0
                    },
                    :SHIFTRY => {
                        :encounter => denEncounters[:SHIFTRY],
                        :weight => 1.0
                    },
                    :REUNICLUS => {
                        :encounter => denEncounters[:REUNICLUS],
                        :weight => 1.0
                    },
                    :DUOSION => { #CHANGED
                        :encounter => denEncounters[:DUOSION],
                        :weight => 1.0
                    },
                    :TROPIUS => {
                        :encounter => denEncounters[:TROPIUS],
                        :weight => 1.0
                    },
                    :SIGILYPH => {
                        :encounter => denEncounters[:SIGILYPH],
                        :weight => 1.0
                    },
                    :DHELMISE => {
                        :encounter => denEncounters[:DHELMISE],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_12]
                return {
                    :ROCKRUFF => {
                        :encounter => denEncounters[:ROCKRUFF],
                        :weight => 2.0
                    },
                    :SHIFTRY => {
                        :encounter => denEncounters[:SHIFTRY],
                        :weight => 1.0
                    },
                    :REUNICLUS => {
                        :encounter => denEncounters[:REUNICLUS],
                        :weight => 1.0
                    },
                    :DUOSION => { #CHANGED
                        :encounter => denEncounters[:DUOSION],
                        :weight => 1.0
                    },
                    :TROPIUS => {
                        :encounter => denEncounters[:TROPIUS],
                        :weight => 1.0
                    },
                    :SIGILYPH => {
                        :encounter => denEncounters[:SIGILYPH],
                        :weight => 1.0
                    },
                    :DHELMISE => {
                        :encounter => denEncounters[:DHELMISE],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_8]
                return {
                    :GRAVELER => {
                        :encounter => denEncounters[:GRAVELER],
                        :weight => 2.0
                    },
                    :NUZLEAF => {
                        :encounter => denEncounters[:NUZLEAF],
                        :weight => 1.0
                    },
                    :SOLOSIS => {
                        :encounter => denEncounters[:SOLOSIS],
                        :weight => 1.0
                    },
                    :DUOSION => {
                        :encounter => denEncounters[:DUOSION],
                        :weight => 1.0
                    },
                    :TROPIUS => {
                        :encounter => denEncounters[:TROPIUS],
                        :weight => 1.0
                    },
                    :SIGILYPH => {
                        :encounter => denEncounters[:SIGILYPH],
                        :weight => 1.0
                    },
                    :DHELMISE => {
                        :encounter => denEncounters[:DHELMISE],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_4]
                return {
                    :GRAVELER => {
                        :encounter => denEncounters[:GRAVELER],
                        :weight => 2.0 #float of instances. divided by encounter table length
                    },
                    :NUZLEAF => {
                        :encounter => denEncounters[:NUZLEAF],
                        :weight => 2.0
                    },
                    :SOLOSIS => {
                        :encounter => denEncounters[:SOLOSIS],
                        :weight => 1.0
                    },
                    :TROPIUS => {
                        :encounter => denEncounters[:TROPIUS],
                        :weight => 1.0
                    },
                }
            end
        when "Den1Rare"
            if $game_switches[:Gym_18]
                return {
                    :RELICANTH => {
                        :encounter => denEncounters[:RELICANTH],
                        :weight => 1.0
                    },
                    :PERSIAN => {
                        :encounter => denEncounters[:PERSIAN],
                        :weight => 1.0
                    },
                    :LUMINEON => {
                        :encounter => denEncounters[:LUMINEON],
                        :weight => 1.0
                    },
                    :SUDOWOODO => {
                        :encounter => denEncounters[:SUDOWOODO],
                        :weight => 1.0
                    },
                    :LANTURN => { #CHANGED
                        :encounter => denEncounters[:LANTURN],
                        :weight => 1.0
                    },
                    :MANECTRIC => {
                        :encounter => denEncounters[:MANECTRIC],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_16]
                return {
                    :RELICANTH => {
                        :encounter => denEncounters[:RELICANTH],
                        :weight => 1.0
                    },
                    :PERSIAN => {
                        :encounter => denEncounters[:PERSIAN],
                        :weight => 1.0
                    },
                    :LUMINEON => {
                        :encounter => denEncounters[:LUMINEON],
                        :weight => 1.0
                    },
                    :SUDOWOODO => {
                        :encounter => denEncounters[:SUDOWOODO],
                        :weight => 1.0
                    },
                    :LANTURN => {
                        :encounter => denEncounters[:LANTURN],
                        :weight => 1.0
                    },
                    :MANECTRIC => {
                        :encounter => denEncounters[:MANECTRIC],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_12]
                return {
                    :RELICANTH => {
                        :encounter => denEncounters[:RELICANTH],
                        :weight => 1.0
                    },
                    :PERSIAN => {
                        :encounter => denEncounters[:PERSIAN],
                        :weight => 1.0
                    },
                    :LUMINEON => {
                        :encounter => denEncounters[:LUMINEON],
                        :weight => 1.0
                    },
                    :SUDOWOODO => {
                        :encounter => denEncounters[:SUDOWOODO],
                        :weight => 1.0
                    },
                    :CHINCHOU => { #CHANGED
                        :encounter => denEncounters[:CHINCHOU],
                        :weight => 1.0
                    },
                    :MANECTRIC => {
                        :encounter => denEncounters[:MANECTRIC],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_8]
                return {
                    :RELICANTH => {
                        :encounter => denEncounters[:RELICANTH],
                        :weight => 1.0
                    },
                    :PERSIAN => {
                        :encounter => denEncounters[:PERSIAN],
                        :weight => 1.0
                    },
                    :LUMINEON => {
                        :encounter => denEncounters[:LUMINEON],
                        :weight => 1.0
                    },
                    :BONSLY => {
                        :encounter => denEncounters[:BONSLY],
                        :weight => 1.0
                    },
                    :MANECTRIC => {
                        :encounter => denEncounters[:MANECTRIC],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_4]
                return {
                    :FINNEON => {
                        :encounter => denEncounters[:FINNEON],
                        :weight => 1.0
                    },
                    :BONSLY => {
                        :encounter => denEncounters[:BONSLY],
                        :weight => 1.0
                    },
                    :MEOWTH => {
                        :encounter => denEncounters[:MEOWTH],
                        :weight => 1.0
                    },
                    :ELECTRIKE => {
                        :encounter => denEncounters[:ELECTRIKE],
                        :weight => 1.0
                    },
                }
            end
        when "Den2"
            if $game_switches[:Gym_18]
                return {
                    :UNFEZANT => {
                        :encounter => denEncounters[:UNFEZANT],
                        :weight => 2.0
                    },
                    :WAILORD => {
                        :encounter => denEncounters[:WAILORD],
                        :weight => 1.0
                    },
                    :DUNSPARCE => {
                        :encounter => denEncounters[:DUNSPARCE],
                        :weight => 1.0
                    },
                    :NIDORINO => {
                        :encounter => denEncounters[:NIDORINO],
                        :weight => 2.0
                    },
                    :MANDIBUZZ => {
                        :encounter => denEncounters[:MANDIBUZZ],
                        :weight => 1.0
                    },
                    :MASQUERAIN => {
                        :encounter => denEncounters[:MASQUERAIN],
                        :weight => 1.0
                    },
                    :QUAGSIRE => {
                        :encounter => denEncounters[:QUAGSIRE],
                        :weight => 1.0
                    },
                    :TOGEDEMARU => {
                        :encounter => denEncounters[:TOGEDEMARU],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_16]
                return {
                    :UNFEZANT => {
                        :encounter => denEncounters[:UNFEZANT],
                        :weight => 2.0
                    },
                    :WAILORD => {
                        :encounter => denEncounters[:WAILORD],
                        :weight => 1.0
                    },
                    :DUNSPARCE => {
                        :encounter => denEncounters[:DUNSPARCE],
                        :weight => 1.0
                    },
                    :NIDORINO => {
                        :encounter => denEncounters[:NIDORINO],
                        :weight => 2.0
                    },
                    :MANDIBUZZ => {
                        :encounter => denEncounters[:MANDIBUZZ],
                        :weight => 1.0
                    },
                    :MASQUERAIN => {
                        :encounter => denEncounters[:MASQUERAIN],
                        :weight => 1.0
                    },
                    :QUAGSIRE => {
                        :encounter => denEncounters[:QUAGSIRE],
                        :weight => 1.0
                    },
                    :TOGEDEMARU => {
                        :encounter => denEncounters[:TOGEDEMARU],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_12]
                return {
                    :UNFEZANT => {
                        :encounter => denEncounters[:UNFEZANT],
                        :weight => 2.0
                    },
                    :WAILORD => {
                        :encounter => denEncounters[:WAILORD],
                        :weight => 1.0
                    },
                    :DUNSPARCE => {
                        :encounter => denEncounters[:DUNSPARCE],
                        :weight => 1.0
                    },
                    :NIDORINO => {
                        :encounter => denEncounters[:NIDORINO],
                        :weight => 2.0
                    },
                    :MANDIBUZZ => {
                        :encounter => denEncounters[:MANDIBUZZ],
                        :weight => 1.0
                    },
                    :MASQUERAIN => {
                        :encounter => denEncounters[:MASQUERAIN],
                        :weight => 1.0
                    },
                    :QUAGSIRE => {
                        :encounter => denEncounters[:QUAGSIRE],
                        :weight => 1.0
                    },
                    :TOGEDEMARU => {
                        :encounter => denEncounters[:TOGEDEMARU],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_8]
                return {
                    :UNFEZANT => {
                        :encounter => denEncounters[:UNFEZANT],
                        :weight => 2.0
                    },
                    :WAILMER => {
                        :encounter => denEncounters[:WAILMER],
                        :weight => 1.0
                    },
                    :DUNSPARCE => {
                        :encounter => denEncounters[:DUNSPARCE],
                        :weight => 1.0
                    },
                    :NIDORINO => {
                        :encounter => denEncounters[:NIDORINO],
                        :weight => 2.0
                    },
                    :VULLABY => {
                        :encounter => denEncounters[:VULLABY],
                        :weight => 1.0
                    },
                    :MASQUERAIN => {
                        :encounter => denEncounters[:MASQUERAIN],
                        :weight => 1.0
                    },
                    :QUAGSIRE => {
                        :encounter => denEncounters[:QUAGSIRE],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_4]
                return {
                    :TRANQUILL => {
                        :encounter => denEncounters[:TRANQUILL],
                        :weight => 2.0
                    },
                    :WAILMER => {
                        :encounter => denEncounters[:WAILMER],
                        :weight => 1.0
                    },
                    :DUNSPARCE => {
                        :encounter => denEncounters[:DUNSPARCE],
                        :weight => 1.0
                    },
                    :VULLABY => {
                        :encounter => denEncounters[:VULLABY],
                        :weight => 1.0
                    },
                }
            end
        when "Den2Rare"
            if $game_switches[:Gym_18]
                return {
                    :CHATOT => {
                        :encounter => denEncounters[:CHATOT],
                        :weight => 1.0
                    },
                    :SNORUNT => {
                        :encounter => denEncounters[:SNORUNT],
                        :weight => 1.0
                    },
                    :GLALIE => {
                        :encounter => denEncounters[:GLALIE],
                        :weight => 1.0
                    },
                    :CACNEA => {
                        :encounter => denEncounters[:CACNEA],
                        :weight => 1.0
                    },
                    :CACTURNE => {
                        :encounter => denEncounters[:CACTURNE],
                        :weight => 1.0
                    },
                    :CLAYDOL => {
                        :encounter => denEncounters[:CLAYDOL],
                        :weight => 1.0
                    },
                    :KLEFKI => {
                        :encounter => denEncounters[:KLEFKI],
                        :weight => 2.0
                    },
                }
            end
            if $game_switches[:Gym_16]
                return {
                    :CHATOT => {
                        :encounter => denEncounters[:CHATOT],
                        :weight => 1.0
                    },
                    :SNORUNT => {
                        :encounter => denEncounters[:SNORUNT],
                        :weight => 1.0
                    },
                    :GLALIE => {
                        :encounter => denEncounters[:GLALIE],
                        :weight => 1.0
                    },
                    :CACNEA => {
                        :encounter => denEncounters[:CACNEA],
                        :weight => 1.0
                    },
                    :CACTURNE => {
                        :encounter => denEncounters[:CACTURNE],
                        :weight => 1.0
                    },
                    :CLAYDOL => {
                        :encounter => denEncounters[:CLAYDOL],
                        :weight => 1.0
                    },
                    :KLEFKI => {
                        :encounter => denEncounters[:KLEFKI],
                        :weight => 2.0
                    },
                }
            end
            if $game_switches[:Gym_12]
                return {
                    :CHATOT => {
                        :encounter => denEncounters[:CHATOT],
                        :weight => 1.0
                    },
                    :SNORUNT => {
                        :encounter => denEncounters[:SNORUNT],
                        :weight => 1.0
                    },
                    :GLALIE => {
                        :encounter => denEncounters[:GLALIE],
                        :weight => 1.0
                    },
                    :CACNEA => {
                        :encounter => denEncounters[:CACNEA],
                        :weight => 1.0
                    },
                    :CACTURNE => {
                        :encounter => denEncounters[:CACTURNE],
                        :weight => 1.0
                    },
                    :CLAYDOL => {
                        :encounter => denEncounters[:CLAYDOL],
                        :weight => 1.0
                    },
                    :KLEFKI => {
                        :encounter => denEncounters[:KLEFKI],
                        :weight => 2.0
                    },
                }
            end
            if $game_switches[:Gym_8]
                return {
                    :CHATOT => {
                        :encounter => denEncounters[:CHATOT],
                        :weight => 2.0
                    },
                    :SNORUNT => {
                        :encounter => denEncounters[:SNORUNT],
                        :weight => 1.0
                    },
                    :GLALIE => {
                        :encounter => denEncounters[:GLALIE],
                        :weight => 1.0
                    },
                    :CACNEA => {
                        :encounter => denEncounters[:CACNEA],
                        :weight => 1.0
                    },
                    :CACTURNE => {
                        :encounter => denEncounters[:CACTURNE],
                        :weight => 1.0
                    },
                    :CLAYDOL => {
                        :encounter => denEncounters[:CLAYDOL],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_4]
                return {
                    :CHATOT => {
                        :encounter => denEncounters[:CHATOT],
                        :weight => 1.0
                    },
                    :SNORUNT => {
                        :encounter => denEncounters[:SNORUNT],
                        :weight => 2.0
                    },
                    :CACNEA => {
                        :encounter => denEncounters[:CACNEA],
                        :weight => 2.0
                    },
                }
            end
        when "Den3"
            if $game_switches[:Gym_18]
                return {
                    :STOUTLAND => {
                        :encounter => denEncounters[:STOUTLAND],
                        :weight => 2.0
                    },
                    :CRABRAWLER => {
                        :encounter => denEncounters[:CRABRAWLER],
                        :weight => 1.0
                    },
                    :PACHIRISU => {
                        :encounter => denEncounters[:PACHIRISU],
                        :weight => 1.0
                    },
                    :CHIMECHO => {
                        :encounter => denEncounters[:CHIMECHO],
                        :weight => 1.0
                    },
                    :STUNFISK => {
                        :encounter => denEncounters[:STUNFISK],
                        :weight => 1.0
                    },
                    :KADABRA => {
                        :encounter => denEncounters[:KADABRA],
                        :weight => 2.0 #CHANGED
                    },
                    :PRIMEAPE => { #CHANGED
                        :encounter => denEncounters[:PRIMEAPE],
                        :weight => 2.0
                    },
                }
            end
            if $game_switches[:Gym_16]
                return {
                    :STOUTLAND => {
                        :encounter => denEncounters[:STOUTLAND],
                        :weight => 2.0
                    },
                    :CRABRAWLER => {
                        :encounter => denEncounters[:CRABRAWLER],
                        :weight => 1.0
                    },
                    :PACHIRISU => {
                        :encounter => denEncounters[:PACHIRISU],
                        :weight => 1.0
                    },
                    :CHIMECHO => {
                        :encounter => denEncounters[:CHIMECHO],
                        :weight => 1.0
                    },
                    :STUNFISK => {
                        :encounter => denEncounters[:STUNFISK],
                        :weight => 1.0
                    },
                    :KADABRA => {
                        :encounter => denEncounters[:KADABRA],
                        :weight => 2.0 #CHANGED
                    },
                    :PRIMEAPE => { #CHANGED
                        :encounter => denEncounters[:PRIMEAPE],
                        :weight => 2.0
                    },
                }
            end
            if $game_switches[:Gym_12]
                return {
                    :STOUTLAND => {
                        :encounter => denEncounters[:STOUTLAND],
                        :weight => 2.0
                    },
                    :CRABRAWLER => {
                        :encounter => denEncounters[:CRABRAWLER],
                        :weight => 1.0
                    },
                    :PACHIRISU => {
                        :encounter => denEncounters[:PACHIRISU],
                        :weight => 1.0
                    },
                    :CHIMECHO => {
                        :encounter => denEncounters[:CHIMECHO],
                        :weight => 1.0
                    },
                    :STUNFISK => {
                        :encounter => denEncounters[:STUNFISK],
                        :weight => 1.0
                    },
                    :KADABRA => {
                        :encounter => denEncounters[:KADABRA],
                        :weight => 2.0
                    },
                    :MANKEY => {
                        :encounter => denEncounters[:MANKEY],
                        :weight => 2.0
                    },
                }
            end
            if $game_switches[:Gym_8]
                return {
                    :STOUTLAND => {
                        :encounter => denEncounters[:STOUTLAND],
                        :weight => 2.0
                    },
                    :CRABRAWLER => {
                        :encounter => denEncounters[:CRABRAWLER],
                        :weight => 1.0
                    },
                    :PACHIRISU => {
                        :encounter => denEncounters[:PACHIRISU],
                        :weight => 1.0
                    },
                    :CHIMECHO => {
                        :encounter => denEncounters[:CHIMECHO],
                        :weight => 1.0
                    },
                    :STUNFISK => {
                        :encounter => denEncounters[:STUNFISK],
                        :weight => 1.0
                    },
                    :ABRA => {
                        :encounter => denEncounters[:ABRA],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_4]
                return {
                    :HERDIER => {
                        :encounter => denEncounters[:HERDIER],
                        :weight => 2.0
                    },
                    :CRABRAWLER => {
                        :encounter => denEncounters[:CRABRAWLER],
                        :weight => 1.0
                    },
                    :PACHIRISU => {
                        :encounter => denEncounters[:PACHIRISU],
                        :weight => 1.0
                    },
                    :CHIMECHO => {
                        :encounter => denEncounters[:CHIMECHO],
                        :weight => 1.0
                    },
                }
            end
        when "Den3Rare"
            if $game_switches[:Gym_18]
                return {
                    :RHYDON => {
                        :encounter => denEncounters[:RHYDON],
                        :weight => 1.0
                    },
                    :VANILLUXE => {
                        :encounter => denEncounters[:VANILLUXE],
                        :weight => 2.0
                    },
                    :PURUGLY => {
                        :encounter => denEncounters[:PURUGLY],
                        :weight => 1.0
                    },
                    :DITTO => {
                        :encounter => denEncounters[:DITTO],
                        :weight => 2.0
                    },
                    :URSARING => {
                        :encounter => denEncounters[:URSARING],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_16]
                return {
                    :RHYDON => {
                        :encounter => denEncounters[:RHYDON],
                        :weight => 1.0
                    },
                    :VANILLUXE => {
                        :encounter => denEncounters[:VANILLUXE],
                        :weight => 2.0
                    },
                    :PURUGLY => {
                        :encounter => denEncounters[:PURUGLY],
                        :weight => 1.0
                    },
                    :DITTO => {
                        :encounter => denEncounters[:DITTO],
                        :weight => 2.0
                    },
                    :URSARING => {
                        :encounter => denEncounters[:URSARING],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_12]
                return {
                    :RHYDON => {
                        :encounter => denEncounters[:RHYDON],
                        :weight => 1.0
                    },
                    :VANILLUXE => {
                        :encounter => denEncounters[:VANILLUXE],
                        :weight => 2.0
                    },
                    :PURUGLY => {
                        :encounter => denEncounters[:PURUGLY],
                        :weight => 1.0
                    },
                    :DITTO => {
                        :encounter => denEncounters[:DITTO],
                        :weight => 2.0
                    },
                    :URSARING => {
                        :encounter => denEncounters[:URSARING],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_8]
                return {
                    :RHYDON => {
                        :encounter => denEncounters[:RHYDON],
                        :weight => 1.0
                    },
                    :VANILLUXE => {
                        :encounter => denEncounters[:VANILLUXE],
                        :weight => 1.0
                    },
                    :VANILLISH => {
                        :encounter => denEncounters[:VANILLISH],
                        :weight => 1.0
                    },
                    :PURUGLY => {
                        :encounter => denEncounters[:PURUGLY],
                        :weight => 1.0
                    },
                    :DITTO => {
                        :encounter => denEncounters[:DITTO],
                        :weight => 1.0
                    },
                    :TEDDIURSA => {
                        :encounter => denEncounters[:TEDDIURSA],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_4]
                return {
                    :RHYHORN => {
                        :encounter => denEncounters[:RHYHORN],
                        :weight => 1.0
                    },
                    :VANILLITE => {
                        :encounter => denEncounters[:VANILLITE],
                        :weight => 2.0
                    },
                    :DITTO => {
                        :encounter => denEncounters[:DITTO],
                        :weight => 1.0
                    },
                    :PURUGLY => {
                        :encounter => denEncounters[:PURUGLY],
                        :weight => 1.0
                    },
                }
            end
        when "Den4"
            if $game_switches[:Gym_18]
                return {
                    :LOMBRE => {
                        :encounter => denEncounters[:LOMBRE],
                        :weight => 2.0
                    },
                    :LURANTIS => {
                        :encounter => denEncounters[:LURANTIS],
                        :weight => 1.0
                    },
                    :SALAZZLE => {
                        :encounter => denEncounters[:SALAZZLE],
                        :weight => 1.0
                    },
                    :GASTRODON => {
                        :encounter => denEncounters[:GASTRODON],
                        :weight => 2.0
                    },
                    :SWANNA => {
                        :encounter => denEncounters[:SWANNA],
                        :weight => 2.0
                    },
                    :NOIVERN => {
                        :encounter => denEncounters[:NOIVERN],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_16]
                return {
                    :LOMBRE => {
                        :encounter => denEncounters[:LOMBRE],
                        :weight => 2.0
                    },
                    :LURANTIS => {
                        :encounter => denEncounters[:LURANTIS],
                        :weight => 1.0
                    },
                    :SALAZZLE => {
                        :encounter => denEncounters[:SALAZZLE],
                        :weight => 1.0
                    },
                    :GASTRODON => {
                        :encounter => denEncounters[:GASTRODON],
                        :weight => 2.0
                    },
                    :SWANNA => {
                        :encounter => denEncounters[:SWANNA],
                        :weight => 2.0
                    },
                    :NOIVERN => {
                        :encounter => denEncounters[:NOIVERN],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_12]
                return {
                    :LOMBRE => {
                        :encounter => denEncounters[:LOMBRE],
                        :weight => 2.0
                    },
                    :LURANTIS => {
                        :encounter => denEncounters[:LURANTIS],
                        :weight => 1.0
                    },
                    :SALAZZLE => {
                        :encounter => denEncounters[:SALAZZLE],
                        :weight => 1.0
                    },
                    :GASTRODON => {
                        :encounter => denEncounters[:GASTRODON],
                        :weight => 2.0
                    },
                    :SWANNA => {
                        :encounter => denEncounters[:SWANNA],
                        :weight => 2.0
                    },
                    :NOIVERN => {
                        :encounter => denEncounters[:NOIVERN],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_8]
                return {
                    :LOMBRE => {
                        :encounter => denEncounters[:LOMBRE],
                        :weight => 2.0
                    },
                    :LURANTIS => {
                        :encounter => denEncounters[:LURANTIS],
                        :weight => 1.0
                    },
                    :SALAZZLE => {
                        :encounter => denEncounters[:SALAZZLE],
                        :weight => 1.0
                    },
                    :GASTRODON => {
                        :encounter => denEncounters[:GASTRODON],
                        :weight => 2.0
                    },
                    :NOIVERN => {
                        :encounter => denEncounters[:NOIVERN],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_4]
                return {
                    :LOTAD => {
                        :encounter => denEncounters[:LOTAD],
                        :weight => 2.0
                    },
                    :GASTRODON => {
                        :encounter => denEncounters[:GASTRODON],
                        :weight => 2.0
                    },
                    :NOIBAT => {
                        :encounter => denEncounters[:NOIBAT],
                        :weight => 1.0
                    },
                }
            end
        when "Den4Rare"
            if $game_switches[:Gym_18]
                return {
                    :RAPIDASH => {
                        :encounter => denEncounters[:RAPIDASH],
                        :weight => 2.0
                    },
                    :JELLICENT => {
                        :encounter => denEncounters[:JELLICENT],
                        :weight => 2.0
                    },
                    :MARILL => { 
                        :encounter => denEncounters[:MARILL],
                        :weight => 1.0
                    },
                    :TIMBURR => { #CHANGED
                        :encounter => denEncounters[:TIMBURR],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_16]
                return {
                    :RAPIDASH => {
                        :encounter => denEncounters[:RAPIDASH],
                        :weight => 2.0
                    },
                    :JELLICENT => {
                        :encounter => denEncounters[:JELLICENT],
                        :weight => 2.0
                    },
                    :MARILL => {
                        :encounter => denEncounters[:MARILL],
                        :weight => 1.0
                    },
                    :TIMBURR => { 
                        :encounter => denEncounters[:TIMBURR],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_12]
                return {
                    :RAPIDASH => {
                        :encounter => denEncounters[:RAPIDASH],
                        :weight => 2.0
                    },
                    :JELLICENT => {
                        :encounter => denEncounters[:JELLICENT],
                        :weight => 2.0
                    },
                    :MARILL => { #CHANGED
                        :encounter => denEncounters[:MARILL],
                        :weight => 1.0
                    },
                    :TIMBURR => { 
                        :encounter => denEncounters[:TIMBURR],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_8]
                return {
                    :PONYTA => {
                        :encounter => denEncounters[:PONYTA],
                        :weight => 1.0
                    },
                    :RAPIDASH => {
                        :encounter => denEncounters[:RAPIDASH],
                        :weight => 1.0
                    },
                    :FRILLISH => {
                        :encounter => denEncounters[:FRILLISH],
                        :weight => 1.0
                    },
                    :JELLICENT => {
                        :encounter => denEncounters[:JELLICENT],
                        :weight => 1.0
                    },
                }
            end
            if $game_switches[:Gym_4]
                return {
                    :PONYTA => {
                        :encounter => denEncounters[:PONYTA],
                        :weight => 2.0
                    },
                    :FRILLISH => {
                        :encounter => denEncounters[:FRILLISH],
                        :weight => 2.0
                    },
                }
            end
        when "Beldum"
            return {
                :BELDUM => {
                    :encounter => denEncounters[:BELDUM],
                    :weight => 1.0
                }
            }
        else
            raise "Raid Den #{den} not defined! Please report this!"
            return
    end
end

def RaidDen(den)
    den = den.to_s if den.is_a?(Symbol)
    encTable = encounterTable(den)
    

    baseLevel = 0
    baseLevel = 35 if $game_switches[:Gym_4]
    baseLevel = 50 if $game_switches[:Gym_8]
    baseLevel = 65 if $game_switches[:Gym_12]
    baseLevel = 80 if $game_switches[:Gym_16]
    baseLevel = 95 if $game_switches[:Gym_18]
    baseLevel = 20 if den == "Beldum"

    encTableLength = 0
    encTable.each{|enc,data| encTableLength += data[:weight]}
    
    arr = []
    encTable.each{|enc,data| 
        w = data[:weight]
        while w >= 1
            arr.push(enc)
            w -= 1
        end
    }
    species =  arr[rand(0...encTableLength)]

    level = baseLevel + rand(-5..5)
    encdata = encTable[species]

    Kernel.pbMessage("This den contains a #{checkRaidStar(level)}-star #{$cache.pkmn[species].name}!")
    canescape = true
    canlose = false
    variable=Variables[:BattleResult]
    $game_switches[:Raid] = true
    if Kernel.pbConfirmMessage("Would you like to fight it?")
        mon = pbGenerateWildPokemon(species,level)
        mon.form = encdata[:encounter][:Form]
        mon.makeShiny if rand(100) <= (encdata[:encounter][:ShinyChance] * 10)
        if encdata[:encounter][:Moves].length > 0
            encdata[:encounter][:Moves].each{|move|
                mon.pbLearnMove(move)
            }
        end
        mon.setAbility(encdata[:encounter][:Ability]) if encdata[:encounter][:Ability] != nil
        mon.iv = encdata[:encounter][:IVs].clone if encdata[:encounter][:IVs].length > 0
        mon.ev = encdata[:encounter][:EVs].clone if encdata[:encounter][:EVs].length > 0
        mon.iv = Array.new(6,31) if ($game_switches[:Full_IVs] || $game_switches[:swumod])
        bossFunction($cache.bosses[:SHADOWDEN],:SHADOWDEN,mon)
        
        ret = pbWildBattleObject(mon,variable)

        $game_switches[:Raid] = false
        return ret
    else
        $game_switches[:Raid] = false
        $PokemonGlobal.nextBattleBGM=nil
        $PokemonGlobal.nextBattleME=nil
        $PokemonGlobal.nextBattleBack=nil
        if Kernel.pbConfirmMessage("Would you like to clear the den?")
            $game_variables[:BattleResult]=1
            return true
        end
        $game_variables[:BattleResult]=3
        return false
    end
end

def raidHandler(decision, pokemon)
    return if !$game_switches[:Raid]
    pokemon.makeShadow
    pokemon.isbossmon = false
    pokemon.shieldCount = nil
    pokemon.bossId = nil
    if decision == 4
        if !$Trainer.pokedex.nil?
            $Trainer.pokedex.dexList[pokemon.species][:shadowCaught?] = true
        end
    end
end